package org.example;

declare Order
    id : String
    amount : double
    discountApplied : boolean = false
    finalAmount : double = 0.0
end

rule "Create Sample Orders"
    when
        not Order()
    then
        Order order1 = new Order();
        order1.setId("ORD001");
        order1.setAmount(150.0);
        insert(order1);
        
        Order order2 = new Order();
        order2.setId("ORD002");
        order2.setAmount(75.0);
        insert(order2);
end

rule "Apply Discount for Large Orders"
    no-loop
    when
        $order : Order(amount > 100.0, discountApplied == false)
    then
        modify($order) { 
            setDiscountApplied(true),
            setFinalAmount($order.getAmount() * 0.9)
        }
end

rule "Set Final Amount for Small Orders"
    no-loop
    when
        $order : Order(amount <= 100.0, finalAmount == 0.0)
    then
        modify($order) { setFinalAmount($order.getAmount()) }
end